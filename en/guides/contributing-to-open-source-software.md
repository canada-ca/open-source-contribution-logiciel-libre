# Guide for Contributing to Open Source Software (Draft)

The [Directive on Management of Information Technology](https://www.tbs-sct.gc.ca/pol/doc-eng.aspx?id=15249), Appendix C, provides Mandatory Procedures for Enterprise Architecture Assessment. These will be used by the GC Enterprise and departmental Architecture Review Boards in an assessment framework for digital initiatives to ensure that all sub-organizations of the GC adhere to a single, consistent digital direction.

This strategy aligns with the [Digital Standards](https://www.canada.ca/en/government/publicservice/modernizing/government-canada-digital-standards.html) and requirement C.2.3.8 of the [Mandatory Procedures for Enterprise Architecture Assessment](https://www.tbs-sct.gc.ca/pol/doc-eng.aspx?id=15249#claC.2.3.8) which provide that all custom source code must be released under an appropriate open source software licences.

As such it is recommended for departments to contribute back to the community all source code modifications made to open source software, whether in-house by GC or through procurement contracts.

## There Are Many Ways to Contribute

Open source communities are driven by a wide range of contributions.
Code that fixes bugs or implements valued features is of course very important, but non-code contributions such as writing or editing documentation, or submitting feature requests and bug reports, are also highly valued.
Even simply supporting the contributions of others, or expressing interest in another's feature request, can be a valued contribution.

### Steps required for GC employees to contribute to open source:

1. [There Are Many Ways to Contribute](#there-are-many-ways-to-contribute)
2. [Verify Open Source Software Licence](#verify-open-source-software-licence)
3. [Verify Contributing Process and Policies](#verify-contributing-process-and-policies)
4. [Additional Approvals](#additional-approvals)
5. [Contribute to the project](#contribute-to-the-project)
6. [Contribute through professional services](#contribute-through-professional-services)
7. [Publish contributions regardless of upstream acceptance](#publish-contributions-regardless-of-upstream-acceptance)

## Verify Open Source Software Licence

The GC can contribute to all software licensed under an [Open Source Initiative approved license](https://opensource.org/licenses) or a [Free Software Foundation free software licence](https://www.gnu.org/licenses/license-list.html).

If a licence for software developed in the open is under another licence, seek legal counsel to clarify if contributions are recommended.

## Verify Contributing Process and Policies

Certain projects may have specific policies for code contribution (Contributor Licence Agreement, Developer's Certificate of Origin) as well as processes (templates, platform, etc.).
Before going forward with submitting a contribution, employees should properly understand the project contribution processes and policies.
Employees should then ensure that the delegated approvals meet those requirements.

## Additional Approvals

If for some reason the departmental delegated approvals are not meeting the third-party contribution's requirements, employees should contact their supervisor to see how they can obtain the additional approvals required.
Departments should define specific criteria for approval of open-source contributions, and describe them clearly to employees.

### Time

Some departments may institute guidelines or policy stating that employees must get their manager's approval to spend public time contributing to open source software.
This should not be intended to curtail open-source contribution, but only to allow for the prioritization of operational needs; the default policy should be to encourage contributing back to open-source projects used by the GC.

### Department

Similar to open data or information covered by the [Directive on Open Government](https://www.tbs-sct.gc.ca/pol/doc-eng.aspx?id=28108), the publication of source code under an open source software licence, requires appropriate department or agency approvals.

That person may vary according to your department and delegation should be encouraged to the lowest level possible to encourage contribution to 3rd party OSS projects.

## Contribute to the project

### Identify as an employee of the Government of Canada

In order to contribute, it may be required that you set up an account with the site or platform where the project you want to contribute to is hosted. 
This should clearly identify you as an employee of the Government of Canada since you would be contributing back as such. 
If there is an option to have your organization listed on the project, it would be beneficial to do so as well.

Currently, it is recommended that employees use their full name and Government of Canada email address for all code contributions to public repositories while acting within the scope of their duties or employment as this is the primary way of identifying your work.
Some services allow you to list multiple email addresses, others may require you to set up a new account for official contributions.

**Note**: this provision is related to the [Public Servant Invention Act](https://laws-lois.justice.gc.ca/eng/acts/P-32/FullText.html#h-3), section 3. 
Additional clarification as to the means of identifying as an employee of the GC without necessarily requiring the email address in commits will need to be sought to ease the process and your organization may already have its own guidance around this topic.

### Submit changes

To make changes in open source software, engage with the community and submit your changes upstream, which means to the original project, to ensure that your modifications are supported by future updates.
This way, your changes will help improve the software for everyone that uses it but you will also ensure that you stay in line with the original project and don't have to maintain a separate version of the source code.

Contributing to a 3rd party should be done in accordance to the project governance model, if such a model is present.

## Contribute through professional services

If your department would like to leverage professional services to contribute to third party projects, see [Guide for publishing Open Source Code](publishing-open-source-code.md#obtain-rights-to-custom-code-in-contracts)

## Publish contributions regardless of upstream acceptance

Whether or not a given set of changes is accepted upstream as a contribution, the changes should still be published in accordance with the [publication guide](https://github.com/canada-ca/open-source-logiciel-libre/blob/master/en/guides/publishing-open-source-code.md).

Publication allows upstream, the original project, to pick up the changes at some later date, and allows 3rd parties to pick up the changes independently of when or whether upstream does so.

Changes not accepted by upstream should still be noted in upstream forums where possible and appropriate, so that 3rd parties who might be interested in those changes have a means of discovering them.
